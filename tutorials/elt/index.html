<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ELT vs ETL · GeneralLedger.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="GeneralLedger.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">GeneralLedger.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Objective</a></li><li><a class="tocitem" href="../../introduction/">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../aboutgl/">About GL</a></li><li><a class="tocitem" href="../glprocesses/">GL Processes</a></li><li><a class="tocitem" href="../erd/">ERD</a></li><li><a class="tocitem" href="../installation/">Installing Julia</a></li><li class="is-active"><a class="tocitem" href>ELT vs ETL</a><ul class="internal"><li><a class="tocitem" href="#Extract"><span>Extract</span></a></li><li><a class="tocitem" href="#web_crawl"><span>Web crawl &amp; Web Scraping</span></a></li><li><a class="tocitem" href="#Load"><span>Load</span></a></li><li><a class="tocitem" href="#Transform"><span>Transform</span></a></li><li><a class="tocitem" href="#ETL-Data-warehouse"><span>ETL Data warehouse</span></a></li><li><a class="tocitem" href="#ELT-Data-lake"><span>ELT Data lake</span></a></li></ul></li><li><a class="tocitem" href="../selfservice/">Self-Service Data Analytic</a></li><li><a class="tocitem" href="../plots/">Visualizations, Buttons, sliders, filters, n-D plots, plots vs graphs</a></li><li><a class="tocitem" href="../analytic/">p-value, null hypothesis and real time analytic</a></li><li><a class="tocitem" href="../timeseries/">Time Series, Impact analysis</a></li><li><a class="tocitem" href="../mlforgl/">ML for GL</a></li><li><a class="tocitem" href="../dlforgl/">DL for GL</a></li><li><a class="tocitem" href="../graph/">Graph Theory / Network Science</a></li></ul></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>ELT vs ETL</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ELT vs ETL</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/AmitXShukla/GeneralLedger.jl/blob/master/docs/src/tutorials/elt.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ELT-vs-ETL.jl"><a class="docs-heading-anchor" href="#ELT-vs-ETL.jl">ELT vs ETL.jl</a><a id="ELT-vs-ETL.jl-1"></a><a class="docs-heading-anchor-permalink" href="#ELT-vs-ETL.jl" title="Permalink"></a></h1><p>ETL Data Warehouse vs ELT Data Lake debate, is like vim vs emacs, linux vs windows never ending discussions.</p><p>It means different things and may represent different concepts, but end of the day leads to one conclusion.</p><p><em>Data is a mineral, if you handle it with care and delicacy, polish and move it to a fine safe enclosure, it will age as fine gold.</em> </p><font color=brown><b> Amit Shukla</b></font>
<br><p>In this lesson, we will discuss different strategies to Extract, Transform, Load data from different sources to different enclosures. You will find examples to address different type of extract, data pull strategies with code.</p><p><strong>Why this package?</strong> There are a dozen ETL/ELT and Data warehouse/ Data lake solutions available in the market today. All of them are extremely capable of extraction, load and transforming almost any type of data structure like structured, un-structured, binary, BLOB, sound, image or simple text in large quantities.</p><p><code>This package neither challenges or aims to build anything different.</code> Instead, this package will use existing RDBMS, DataLakes, or Document databases available in the market.</p><p>This package should be seen as providing a DataType environment, where we can first understand and define subject data structure, then do ELT operations on it. This is what I meant earlier by saying handle with care and delicacy.</p><p><code>Inheriting behavior is much more important than being able to inherit structure.</code></p><p>Just to give an example, Normally, we ingest all vendor tables/transactions into a Date warehouse or Data lake or any self-service environment, and then let SMEs run meaningful analytics on it. instead, Lets first define a Vendor DataType and then build ELT or ETL operations on it. This simple concept will age your data to fine gold and SME will be able to do self-service analytics with worrying too much learning data structure and entity relationships.</p><p>Another example is,  Instead of loading all your accounting data into RDBMS tables, developers take time to pre-define an accounting Data Structure such as JOURNALS, LEDGER, ACCOUNTINGLINES, CHARTFIELDs and HIERARCHY data types, then ELT data into these Data Structures and push it to the reporting database. This will lead to a much powerful driverless self-service live reporting/ predictive analytics environment.</p><p>In the following sections, we will discuss ELT &amp; ELT strategies.</p><hr/><h2 id="Extract"><a class="docs-heading-anchor" href="#Extract">Extract</a><a id="Extract-1"></a><a class="docs-heading-anchor-permalink" href="#Extract" title="Permalink"></a></h2><p>Data Extraction from a known source is easy, tough part is, automating to fetch data on pre-defined schedules. Further, most difficult task is to identify deltas on every single data row during extract execution and pull/push only changed datasets.</p><p><strong>Stage or not to stage:</strong> keeping an original copy of data into a local/hadoop directory or storing the first original copy in RDBMS tables brings extra benefit to your Analytics. You will always be able to go back in time and restore from originals, however, it also brings unmanageable clutter, junk and storage costs.</p><p>Before trying to read data from source, you must think, how would you want to use it in near future.</p><p>You can store the original copy as-is to a directory or RDBMS table. This works well, when you are dealing with txt, image files. Storage is cheaper than computing.</p><p>for example</p><ul><li>consider storing a copy of the <em>APPL SEC Balance sheet filing PDF</em> from the internet rather than building NLP AI to read certain dollar amounts or quantities from a PDF.</li></ul><p>Your AI scripts will bill more for compute hours than storing a few extra KBs.</p><p>on the other hand, reading 5 lines from 5000 pages PDF, doesn&#39;t justify the need to store the entire document. Instead, use a web crawler, good OCR or text reader AI-bot to fetch data that is meaningful to you.</p><ul><li>while reading data from a RDBMS, consider using a <em>where last<em>update</em>date &gt; last<em>run</em>date</em> to fetch only deltas.</li></ul><p><code>storing &lt;last_run_date&gt; will be discussed in LOAD section later.</code></p><p>Let&#39;s look into few example used to extract different type of data.</p><h4 id="file-download"><a class="docs-heading-anchor" href="#file-download">file download</a><a id="file-download-1"></a><a class="docs-heading-anchor-permalink" href="#file-download" title="Permalink"></a></h4><p><strong>download a simple file from a website, FTP location</strong></p><pre><code class="language-julia-repl">julia&gt; # let&#39;s download Apple INC Q2 2021 SEC Filing document
       # downloading from website
       # download(url::AbstractString, [path::AbstractString = tempname()]) -&gt; path
       
       fl = download(&quot;https://s2.q4cdn.com/470004039/files/doc_financials/2021/q2/FY21-Q2-Consolidated-Financial-Statements.pdf&quot;);

julia&gt; filesize(fl)
881446</code></pre><p><strong>download using curl/wget</strong></p><pre><code class="language-julia-repl">julia&gt; # let&#39;s download Apple INC Q2 2021 SEC Filing document
       # downloading using curl/wget
       # wrap system commands (curl or wget) inside backticks
       
       downloadFileCommand = `curl https://s2.q4cdn.com/470004039/files/doc_financials/2021/q2/FY21-Q2-Consolidated-Financial-Statements.pdf --output apple_q2-21-10Q.pdf`
`curl https://s2.q4cdn.com/470004039/files/doc_financials/2021/q2/FY21-Q2-Consolidated-Financial-Statements.pdf --output apple_q2-21-10Q.pdf`

julia&gt; run(downloadFileCommand)
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  860k  100  860k    0     0   860k      0  0:00:01 --:--:--  0:00:01 2509k
Process(`curl https://s2.q4cdn.com/470004039/files/doc_financials/2021/q2/FY21-Q2-Consolidated-Financial-Statements.pdf --output apple_q2-21-10Q.pdf`, ProcessExited(0))</code></pre><h4 id="auto_data_pull"><a class="docs-heading-anchor" href="#auto_data_pull">automating data pull</a><a id="auto_data_pull-1"></a><a class="docs-heading-anchor-permalink" href="#auto_data_pull" title="Permalink"></a></h4><p>In this section, we will build a simple script, which reads input (urls) file, and downloads all files.</p><p><em>to scrap all available links from webpage tinto a local txt file, see <a href="#web_crawl">Web crawl &amp; Web Scraping</a> section below.</em></p><pre><code class="language-julia-repl">julia&gt; # use this code, to read all links from a txt file and download each file one by one
       using Pkg

julia&gt; Pkg.add(url=&quot;https://github.com/AmitXShukla/GeneralLedger.jl&quot;)
    Updating git-repo `https://github.com/AmitXShukla/GeneralLedger.jl`
    Updating registry at `C:\Users\L569915\.julia\registries\General`
    Updating git-repo `https://github.com/JuliaRegistries/General.git`
ERROR: package `GeneralLedger [640f5719]` has same name or UUID as the active project

julia&gt; using GeneralLedger

julia&gt; autoPullFiles(&quot;c:\\amit.la\\file_name.txt&quot;)
&quot;Download complete&quot;</code></pre><h4 id="scheduling-automated-data-pull"><a class="docs-heading-anchor" href="#scheduling-automated-data-pull">scheduling automated data pull</a><a id="scheduling-automated-data-pull-1"></a><a class="docs-heading-anchor-permalink" href="#scheduling-automated-data-pull" title="Permalink"></a></h4><p>In this section, we will learn different options to automate data pull scripts to run on recurring schedule.</p><p>First and preferred option is, user can setup a cron job on Linux or powershell script on windows.</p><pre><code class="nohighlight">#setup a Linux cron job
crontab -e
# minute hour day-of-month month day-of-week command
0 10 * * * Julia autopull.jl</code></pre><p>and if you must do this in Julia, second option is to use native Julia Lang sleep, timer or scheduler functions.</p><pre><code class="language-julia-repl">julia&gt; # code credit - discourse.julialang.org thread
       result = nothing

julia&gt; done = false
false

julia&gt; while !done
           try
               result = # invoke function that may fail
               done = true
           catch e
               sleep(86400)  # sleep for 1 day(=86400 seconds) before restarting
            end
       end</code></pre><h4 id="RDBMS"><a class="docs-heading-anchor" href="#RDBMS">RDBMS</a><a id="RDBMS-1"></a><a class="docs-heading-anchor-permalink" href="#RDBMS" title="Permalink"></a></h4><p>connecting to Oracle, MY SQL or MS SQL Server</p><h4 id="HIVE"><a class="docs-heading-anchor" href="#HIVE">HIVE</a><a id="HIVE-1"></a><a class="docs-heading-anchor-permalink" href="#HIVE" title="Permalink"></a></h4><p>connecting to Oracle, MY SQL or MS SQL Server</p><h4 id="JSON,-XML"><a class="docs-heading-anchor" href="#JSON,-XML">JSON, XML</a><a id="JSON,-XML-1"></a><a class="docs-heading-anchor-permalink" href="#JSON,-XML" title="Permalink"></a></h4><p>working with JSON, XML like files and parsing data</p><hr/><h2 id="web_crawl"><a class="docs-heading-anchor" href="#web_crawl">Web crawl &amp; Web Scraping</a><a id="web_crawl-1"></a><a class="docs-heading-anchor-permalink" href="#web_crawl" title="Permalink"></a></h2><p>We just looked at examples, how to download file(s) from website or FTP locations. However in some case, you may not know how many files are available for download.</p><p>In this example below, we will use this GeneralLedger.jl function, which crawl through Apple INC SEC Filing web page (or any webpage), reads HTML and identify all PDF/XLSX or CSV files downloadable links.</p><p>We will store these links into csv file and this file can be used in <a href="#auto_data_pull">automating data pull</a>, to automatically download all files at once.</p><p><strong>start a webdriver session</strong></p><pre><code class="language-julia-repl">julia&gt; # you must have a valid webdriver session running on your machine
       # download a valid chromedriver version on your machine from this link
       # https://chromedriver.chromium.org/downloads (may vary)
       # after you download, open a terminal window &amp; browe to directory where chromedrive.exe is location and run
       # chromedriver.exe --url-base=/wd/hub
       # above command will start a chrome webdriver session on port 9515
       # if you see an error below, that&#39;s because I didn&#39;t provide correct path to find chromedriver.exe file
       
       wdrvCommand = `chromedriver.exe --url-base=/wd/hub`
`chromedriver.exe --url-base=/wd/hub`

julia&gt; run(wdrvCommand)
ERROR: IOError: could not spawn `chromedriver.exe --url-base=/wd/hub`: no such file or directory (ENOENT)</code></pre><p><strong>web crawl &amp; web scraping</strong></p><pre><code class="language-julia-repl">julia&gt; using Pkg

julia&gt; Pkg.add(url=&quot;https://github.com/AmitXShukla/GeneralLedger.jl&quot;)
    Updating git-repo `https://github.com/AmitXShukla/GeneralLedger.jl`
ERROR: package `GeneralLedger [640f5719]` has same name or UUID as the active project

julia&gt; using GeneralLedger

julia&gt; # Call this function to crawl through a web page and download all file links
       # first parameter is webpage url, next parameter is list of all file extensions user wish to download followed by output directory path
       getWebLinks(&quot;https://investor.apple.com/investor-relations/default.aspx#tabs_content--2021&quot;, [&quot;pdf&quot;,&quot;csv&quot;,&quot;xlsx&quot;,&quot;xls&quot;], &quot;downloads/web&quot;)
&quot;HTTPS://INVESTOR.APPLE.COM/INVESTOR_RELATIONS/DEFAULT.ASPX_TABS_CONTENT__2021&quot;</code></pre><hr/><h2 id="Load"><a class="docs-heading-anchor" href="#Load">Load</a><a id="Load-1"></a><a class="docs-heading-anchor-permalink" href="#Load" title="Permalink"></a></h2><p>Now once data is identified, we will need a storage system, typically a database, data warehouse or data lake to keep data. Before loading into a Target system, let&#39;s work on our load strategy.</p><p>Think of these scenarios you will be dealing after data is loaded.</p><ul><li>simple excel files first row will be used as RDBMS table names. Often, RDBMS will change column headers and this will be a challenge to map with original excel files each time a newer file is downloaded.</li><li>you dont want to fetch the same file if it already exists in the local/hadoop directory.</li><li>in case of RDBMS, you may want to mark each record with CRUD date (when a row was first created, updated and read. You may never want to hard delete a row, and just do a soft delete instead to hide from the user&#39;s view).</li></ul><hr/><h2 id="Transform"><a class="docs-heading-anchor" href="#Transform">Transform</a><a id="Transform-1"></a><a class="docs-heading-anchor-permalink" href="#Transform" title="Permalink"></a></h2><p>What seems hardest, is the easiest part to deal with. Once a correct dataset is read and loaded into the system. There are several transformation techniques and tools available.</p><p>In ELT like environments, Transformation is mostly done on Analytical tool, like Microsoft Power BI, Tableau, Oracle Analytics are extremely powerful and provide out of the box transformation techniques.</p><p>However, here are some useful scripts, which can be run on local environment for data cleansing. These scripts are extremely powerful when dealing with extreme large Big data sets.</p><ul><li>removing unwanted chars in columns headers or rows.</li><li>removing duplicates</li><li>removing missing, NA</li><li>replacing chars/ strings</li><li>categorizing data</li><li>creating Hierarchy, Tree like dimensional structure</li></ul><hr/><h2 id="ETL-Data-warehouse"><a class="docs-heading-anchor" href="#ETL-Data-warehouse">ETL Data warehouse</a><a id="ETL-Data-warehouse-1"></a><a class="docs-heading-anchor-permalink" href="#ETL-Data-warehouse" title="Permalink"></a></h2><p>Lets discuss how to create a Data warehouse like structure while ETL- extracting, loading and transforming data into a Data warehouse structure for faster ad-hoc self service star-schema like reporting.</p><hr/><h2 id="ELT-Data-lake"><a class="docs-heading-anchor" href="#ELT-Data-lake">ELT Data lake</a><a id="ELT-Data-lake-1"></a><a class="docs-heading-anchor-permalink" href="#ELT-Data-lake" title="Permalink"></a></h2><p>Lets discuss how to create a Data lake like structure for faster ad-hoc self service star-schema like reporting.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../installation/">« Installing Julia</a><a class="docs-footer-nextpage" href="../selfservice/">Self-Service Data Analytic »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Sunday 4 July 2021 21:55">Sunday 4 July 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
